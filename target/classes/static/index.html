<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sisepe</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.24.1/dist/bootstrap-table.min.css">
</head>
<body>
  <div id="app">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3">
          <nav class="menubar">
            <ul class="menu">
              <li class="menu-item">
                <span>Zona ∨</span>
                <ul class="submenu">
                  <li><a href="/static/bootstrap/tabelas/zona/FormNumZona.html" data-form="zona/FormNumZona.html">Número</a></li>
                  <li><a href="#" data-form="zona/FormMunicipioSede.html">Município Sede</a></li>
                  <li><a href="#" data-form="zona/FormMunicipios.html">Municípios</a></li>
                  <li><a href="#" data-form="zona/FormSecoes.html">Seções</a></li>
                </ul>
              </li>
              <li class="menu-item">
                <span>Município ∨</span>
                <ul class="submenu">
                  <li><a href="#" data-form="municipio/FormCodTSE.html">Cod TSE</a></li>
                  <li><a href="#" data-form="municipio/FormZonas.html">Zonas</a></li>
                  <li><a href="#" data-form="municipio/FormSecoes.html">Seções</a></li>
                </ul>
              </li>
              <li class="menu-item">
                <span>Polo ∨</span>
                <ul class="submenu">
                  <li><a href="#" data-form="polo/FormNumero.html">Número</a></li>
                  <li><a href="#" data-form="polo/FormMunicipios.html">Municípios</a></li>
                  <li><a href="#" data-form="polo/FormZonas.html">Zonas</a></li>
                  <li><a href="#" data-form="polo/FormPoloDaZona.html">Polo da Zona</a></li>
                </ul>
              </li>
              <li class="menu-item">
                <span>Seção ∨</span>
                <ul class="submenu">
                  <li><a href="#" data-form="secao/FormTodas.html">Todas</a></li>
                  <li><a href="#" data-form="secao/FormPorZona.html">Por Zona</a></li>
                </ul>
              </li>
      </ul>
    </nav>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.24.1/dist/bootstrap-table.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const menuLinks = document.querySelectorAll('.menu a[data-form]');
      const formContainer = document.createElement('div');
      formContainer.id = 'form-container';
      formContainer.className = 'col-md-9';
      formContainer.innerHTML = `
        <div class="text-center mt-5">
          <h3>Selecione uma opção no menu</h3>
          <p class="text-muted">Escolha uma opção no menu ao lado para carregar o formulário correspondente.</p>
        </div>
      `;
      
      // Insert form container after the menu
      const menuContainer = document.querySelector('.col-md-3');
      menuContainer.parentNode.insertBefore(formContainer, menuContainer.nextSibling);

      // Add click event to menu items
      menuLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const formPath = this.getAttribute('data-form');
          loadForm(formPath);
        });
      });

      // Function to load forms
      function loadForm(formPath) {
        fetch(`/bootstrap/tabelas/${formPath}`)
          .then(response => response.text())
          .then(html => {
            formContainer.innerHTML = html;
            // Reinitialize any Bootstrap components if needed
            if (window.bootstrap) {
              const tooltipTriggerList = [].slice.call(formContainer.querySelectorAll('[data-bs-toggle="tooltip"]'));
              tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
              });
            }
          })
          .catch(error => {
            console.error('Erro ao carregar o formulário:', error);
            formContainer.innerHTML = `
              <div class="alert alert-danger mt-3">
                Erro ao carregar o formulário. Por favor, tente novamente.
              </div>
            `;
          });
      }
    });
  </script>
</body>
</html>
